<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import org.fxmisc.richtext.CodeArea?>
<?import org.fxmisc.flowless.VirtualizedScrollPane?>

<BorderPane xmlns="http://javafx.com/javafx/21.0.2" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.taillogs.taillogs.screens.ApplicationController"
            styleClass="app-root">
    <stylesheets>
        <URL value="@styles.css"/>
    </stylesheets>

    <!-- TOP: Menu Bar + Controls -->
    <top>
        <VBox spacing="0">
            <!-- Menu Bar placeholder (will be filled by controller) -->
            <HBox fx:id="menuBarContainer" styleClass="menu-bar-shell"/>

            <!-- Control Bar -->
            <HBox spacing="12.0" styleClass="control-bar">
                <!-- Left Controls -->
                <Label fx:id="fileInfoLabel" text="Log Tail" styleClass="control-title"/>

                <!-- Right Controls -->
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="10.0" alignment="CENTER_RIGHT">
                    <Button fx:id="pauseBtn" text="Tail" minWidth="80" minHeight="32"
                            styleClass="toolbar-button toolbar-primary"
                            onAction="#onTogglePause"/>
                    <Button fx:id="clearBtn" text="Clear" minWidth="80" minHeight="32"
                            styleClass="toolbar-button toolbar-danger"
                            onAction="#onClear"/>
                    <Button fx:id="refreshBtn" text="Refresh" minWidth="90" minHeight="32"
                            styleClass="toolbar-button toolbar-neutral"
                            onAction="#onRefresh"/>
                </HBox>
            </HBox>

            <!-- Tab Bar (Open Files as Tabs) -->
            <HBox fx:id="tabBar" styleClass="tab-bar" minHeight="35"/>
        </VBox>
    </top>

    <!-- CENTER: Main Content Area with Resizable Right Panel -->
    <center>
        <SplitPane dividerPositions="0.7" styleClass="main-split">
            <!-- Left Side: Logs -->
            <VBox spacing="0" styleClass="log-pane">
                <!-- Search Bar -->
                <HBox spacing="8.0" styleClass="search-bar">
                    <Label text="ðŸ”" styleClass="search-icon"/>
                    <TextField fx:id="searchField" HBox.hgrow="ALWAYS"
                               styleClass="search-field"
                               promptText="Search log content..."/>
                </HBox>

                <!-- Text Display Area with VirtualizedScrollPane -->
                <VirtualizedScrollPane VBox.vgrow="ALWAYS">
                    <content>
                        <CodeArea fx:id="logArea"
                                  editable="false"
                                  wrapText="false"
                                  styleClass="code-area"/>
                    </content>
                </VirtualizedScrollPane>

                <!-- Status Bar -->
                <Label fx:id="statusLabel" text="Ready" styleClass="status-bar"/>
            </VBox>

            <!-- Right Side: Right Panel Container -->
            <VBox fx:id="rightPanelContainer" prefWidth="320" minWidth="50" maxWidth="600" styleClass="right-panel">
                <Label text="Right Panel Loading..." style="-fx-padding: 10; -fx-text-fill: #333;" />
            </VBox>
        </SplitPane>
    </center>
</BorderPane>
